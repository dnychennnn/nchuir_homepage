$.gCarousel={defaults:{nextId:"carousel-next",nextText:"Next",prevId:"carousel-prev",prevText:"Previous",nav:1,navPosition:"after",scrollItems:3,scrollDuration:1000,displayedItems:3,loop:1,autoScroll:1,autoScrollTime:3000,itemWidth:0}};$.fn.extend({gCarousel:function(b,d){if(!b){return}var c=$(this).addClass("gcarousel");$("ul",c).addClass("gcarousel-items").wrap("<div>").parent().addClass("gcarousel-container");c.data("gcarousel",b);c.gCarousel[c._gCarouselGetName()]={};c.gCarousel[c._gCarouselGetName()].settings=d=$.extend({},$.gCarousel.defaults,d);if(d.nav){c._gCarouselNavigation()}c._gCarouselInitVars();if(d.constantScroll){c._gCarouselConstantScroll()}else{var a=$(this).gCarousel;if(!d.loop){$(this)._gCarouselHandleNav(0)}if(d.autoScroll){c._gCarouselInitTimer()}}$(".news-block").animate({opacity:1})},_gCarouselGetName:function(){return $(this).data("gcarousel")},_gCarouselConstantScroll:function(){el=$(this);var b=el.gCarousel[el._gCarouselGetName()]._areaWidth;var a=el.gCarousel[el._gCarouselGetName()]._totalWidth;var c=el.gCarousel[el._gCarouselGetName()]._itemWidth;$("ul.gcarousel-items",el).css("left",b).animate({left:"-"+a+"px"},5000*$("li",el).size(),"linear",function(){el=$(this).parent().parent();el._gCarouselConstantScroll()}).on("mouseover",function(){$(this).pause()}).on("mouseout",function(){$(this).resume()})},_gCarouselNavigation:function(){var e=$(this);var d=$(this).gCarousel[$(this)._gCarouselGetName()].settings;var f=$("<ul>").addClass("gcarousel-navigation");var c=$("<li>").append($("<a>"));var b=c.clone().attr("id",d.prevId).addClass("gcarousel-prev");b.children("a").text(d.prevText);var a=c.clone().attr("id",d.nextId).addClass("gcarousel-next");a.children("a").text(d.nextText);f.append(b).append(a);var d=e.gCarousel[e._gCarouselGetName()].settings;if(d.navPosition=="before"){$(".gcarousel-container",this).before(f)}else{$(".gcarousel-container",this).after(f)}$(this).gCarousel[$(this)._gCarouselGetName()]._next=a;$(this).gCarousel[$(this)._gCarouselGetName()]._prev=b;b.bind("click",e._gCarouselPrev);a.bind("click",e._gCarouselNext)},gCarouselRefresh:function(a){$(this)._gCarouselInitVars(a);$(this)._gCarouselHandleNav()},_gCarouselInitVars:function(g){var f=$(this).gCarousel[$(this)._gCarouselGetName()].settings;var d=$(this)._gCarouselGetItems();var e=$("div.gcarousel-container",this).width();if(f.constantScroll){var h=f.itemWidth?f.itemWidth:d.outerWidth()}else{var h=f.itemWidth?f.itemWidth:e/f.displayedItems}var b=0;if(d.size()){lastItem=d.last();b=lastItem.position().left+lastItem.outerWidth()+parseFloat(lastItem.css("marginLeft"))}if(!f.constantScroll){var c=b-e<0?0:-(b-e);$(this).gCarousel[$(this)._gCarouselGetName()]._lastPosition=c}var a=d.size()-1;$(this).gCarousel[$(this)._gCarouselGetName()]._max=a;$(this).gCarousel[$(this)._gCarouselGetName()]._itemWidth=h;$(this).gCarousel[$(this)._gCarouselGetName()]._areaWidth=e;$(this).gCarousel[$(this)._gCarouselGetName()]._totalWidth=b;if(g||!$(this).gCarousel[$(this)._gCarouselGetName()]._index){$(this).gCarousel[$(this)._gCarouselGetName()]._index=0}if(g||!$(this).gCarousel[$(this)._gCarouselGetName()]._currentPosition){$(this).gCarousel[$(this)._gCarouselGetName()]._currentPosition=0}if(g){$("ul.gcarousel-items",this).css("left","0px")}},gCarouselMoveTo:function(d){$(this).gCarouselRefresh();var c=$(this)._gCarouselGetItems();var e=c.size()-1;var b=$(this).gCarousel[$(this)._gCarouselGetName()];if(d>e||d<0||d==b._index){return}var f=c.slice(d,d+1);if($(this)._gCarouselIsDisplayed(f)){return}var a;if(d==e){a=b._lastPosition}else{if(d>b._index){a=$(this)._gCarouselNextPosition(f)}else{if(d<b._index){a=$(this)._gCarouselPrevPosition(f)}}}if(!b._isAnimated){$("ul.gcarousel-items",this)._gCarouselAnimate(a);b._index=d;b._currentPosition=a;if(!b.settings.loop){$(this)._gCarouselHandleNav()}if(b.settings.autoScroll){$(this)._gCarouselInitTimer()}}},_gCarouselNext:function(){var h;if($(this).hasClass("gcarousel")){h=$(this)}else{h=$(this).parents(".gcarousel")}var c=h.gCarousel[h._gCarouselGetName()];var g=c.settings;var a=h._gCarouselGetItems().size()-1;var e;if(c._index==a&&g.loop){e=0}else{if(c._index+g.scrollItems>=a){e=a}else{var b=$(h)._gCarouselGetItems().slice(c._index);e=c._index;var f=0;var d=h;b.each(function(j){if(f==g.scrollItems){return}if(!d._gCarouselIsDisplayed($(this))){e=c._index+j;f++}})}}h.gCarouselMoveTo(e);return false},_gCarouselPrev:function(){var h=$(this).parents(".gcarousel");var c=h.gCarousel[h._gCarouselGetName()];var g=c.settings;var a=$(this)._gCarouselGetItems().size()-1;var e;if(c._index==0&&g.loop){e=a}else{if(c._index-g.scrollItems<=0){e=0}else{var b=$(h)._gCarouselGetItems().slice(0,c._index+1).get().reverse();b=$(b);e=c._index;var f=0;var d=h;b.each(function(j){if(f==g.scrollItems){return}if(!d._gCarouselIsDisplayed($(this))){e=c._index-j;f++}})}}h.gCarouselMoveTo(e);return false},_gCarouselGetItems:function(){return $("ul.gcarousel-items li",this)},_gCarouselNextPosition:function(b){var a=$(this).gCarousel[$(this)._gCarouselGetName()];return -b.position().left+a._areaWidth-b.outerWidth()-parseFloat(b.css("marginLeft"))},_gCarouselPrevPosition:function(a){return -a.position().left-parseFloat(a.css("marginLeft"))},_gCarouselCurrentPosition:function(){return $(this).gCarousel[$(this)._gCarouselGetName()]._currentPosition},_gCarouselIsDisplayed:function(d){var c=$(this).gCarousel[$(this)._gCarouselGetName()];var a=$(this)._gCarouselCurrentPosition();var e=d.position().left;var f=d.outerWidth();var b=parseFloat(d.css("marginLeft"));return !(e+f+b>c._areaWidth-a||a<-e-b)},_gCarouselHandleNav:function(){var c=$(this).gCarousel[$(this)._gCarouselGetName()];var a=$(this)._gCarouselCurrentPosition();var b=$(this)._gCarouselGetItems();if(!b.size()){c._next.addClass("disabled");c._prev.addClass("disabled");return}if($(this)._gCarouselIsDisplayed(b.last())){c._next.addClass("disabled")}else{if(c._next.hasClass("disabled")){c._next.removeClass("disabled")}}if($(this)._gCarouselIsDisplayed(b.first())){c._prev.addClass("disabled")}else{if(c._prev.hasClass("disabled")){c._prev.removeClass("disabled")}}},_gCarouselInitTimer:function(){var c=$(this);var a=$(this).gCarousel[$(this)._gCarouselGetName()];var b=a.settings;$(this)._gCarouselClearTimer();a._timer=setTimeout(function(){c._gCarouselNext()},b.autoScrollTime)},_gCarouselClearTimer:function(){clearTimeout($(this).gCarousel[$(this)._gCarouselGetName()]._timer)},_gCarouselAnimate:function(a){var d=$(this).parent().parent();var b=d.gCarousel[d._gCarouselGetName()];var c=b.settings;$(this).clearQueue();d.gCarousel[d._gCarouselGetName()]._isAnimated=true;$(this).animate({left:a+"px"},c.scrollDuration,function(){var e=$(this).parent().parent();e.gCarousel[e._gCarouselGetName()]._isAnimated=false})}});