(function(f){var d=["log","debug","info","warn","error","assert","dir","dirxml","trace","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","count","exception","table"];var c,b,a;if(typeof f.console=="undefined"||!f.console){try{f.console={}}catch(e){}}c=(g_dev&&typeof f.console.log!="undefined")?f.console.log:function(){};for(b=0,a=d.length;b<a;b++){if(!g_dev||typeof f.console[d[b]]=="undefined"||!f.console[d[b]]){try{f.console[d[b]]=c}catch(e){}}}})(window);(function(a){a.fn.selectFirst=function(){var c=new Array();a(this).children().each(function(){c.push(a(this).val())});var d=undefined;for(var b in c){d=c[b];break}if(d!=undefined){a(this).selectOptions(d)}return a(this)};a.fn.selectLast=function(){var c=new Array();a(this).children().each(function(){c.push(a(this).val())});var d=undefined;for(var b in c){d=c[b]}if(d!=undefined){a(this).selectOptions(d)}return a(this)};a.fn.tagName=function(){try{return this.get(0).tagName.toLowerCase()}catch(b){return""}};a.fn.findId=function(){var b=new RegExp(/[a-z_] ([0-9]{1,})/i);if(b.exec(a(this).attr("class"))[1]){return b.exec(a(this).attr("class"))[1]}return false};a.fn.findValue=function(){var b=new RegExp(/[a-z_] [0-9]{1,}-([0-9]{1,})/i);if(b.exec(a(this).attr("class"))[1]){return b.exec(a(this).attr("class"))[1]}return false};a.fn.showAndHide=function(b,d){var e=d||5000;var c=a(this);c.hide();c.html(b).fadeIn();setTimeout('el.fadeOut().html("")',e)};a.fn.alignBoxes=function(d){var c={path:"> .box-fbox",height:0,height_offset:0,debug:0,nth:-1};c=a.extend(c,d);var b=this;return this.each(function(){var f=c.path==""?a(this):a(this).find(c.path);if(!f.length){console.error('alignBoxes: $("'+a(b).selector+" "+c.path+'") not found.')}if(c.height==0){f.each(function(){var g=a(this).height();if(g>c.height){c.height=g}});if(c.debug){console.debug(c.height)}}var e=c.nth>-1?f.eq(c.nth):f;e.each(function(){a(this).height(c.height+c.height_offset)})})};a.fn.highlightEvenTrs=function(c){var b={extraTrs:false,visible:false};b=a.extend(b,c);var d=b.visible?":visible":"";return this.each(function(){var e=b.extraTrs?3:2;var g=a(this).find("tr:nth-child(1) td").css("background-color");var f=a(this).find("tr:nth-child("+e+") td").css("background-color");if(g==f){var h=0;a(this).find("tbody tr"+d).removeClass("odd").removeClass("even").each(function(j){h=j;if(!b.extraTrs){if(h%2==0){a(this).removeClass("even").addClass("odd")}if(h%2==1){a(this).removeClass("odd").addClass("even")}}else{if(h%4==1||h%4==0){a(this).removeClass("even").addClass("odd")}if(h%4==2||h%4==3){a(this).removeClass("odd").addClass("even")}}});if(a(this).find("tfoot").length){if(a(this).find("tbody tr"+d+":last").hasClass("even")){a("tfoot tr").removeClass("even").addClass("odd")}else{a("tfoot tr").removeClass("odd").addClass("even")}}}})};a.fn.toggleCheckboxes=function(c){var b={checked:true};b=a.extend(b,c);return this.each(function(){a(this).prop("checked",b.checked)})};a.fn.focusClearsDefault=function(c){var d=function(e){if(e){return e.replace(/\r?\n/g,"")}return""};var b={class_default:null,class_changed:null,default_value:""};b=a.extend(b,c);return this.each(function(){var f=d(this.value);var e=b.default_value?d(b.default_value):d(a(this).prop("defaultValue"));if(f==e){a(this).removeClass(b.class_changed);a(this).addClass(b.class_default)}else{a(this).removeClass(b.class_default);a(this).addClass(b.class_changed)}a(this).off("focus.focusClearsDefault");a(this).off("blur.focusClearsDefault");a(this).on("focus.focusClearsDefault",function(g){if(d(this.value)==e){this.value="";a(this).removeClass(b.class_default);a(this).addClass(b.class_changed)}else{}});a(this).on("blur.focusClearsDefault",function(g){if(this.value==""){a(this).addClass(b.class_default);a(this).removeClass(b.class_changed);this.value=e}else{}})})};a.fn.activateReloaders=function(){return this.each(function(){a(this).click(function(){window.location=window.location})})};a.fn.submitFormFromEl=function(b){form=a(this).closest("form");if(form){b.preventDefault();form.submit()}};a.fn.execCallback=function(c){c.mssg=c.mssg||"default_confirmation_mssg";var b={mssg:c.mssg,callback:function(){return confirm(c.mssg)}};b=a.extend(b,c);return this.each(function(){var d=a(this);d.on("submit",function(g,f){if(!f){g.preventDefault();if(b.callback.call(this,d)){d.trigger("submit",1)}}})})};a.fn.openPopup=function(d){var c={title:"Popup",height:"height=500",width:"width=750",top:"top=100",toolbar:"toolbar=no",menubar:"menubar=no",location:"location=no",resizable:"resizable=yes",scrollbars:"scrollbars=yes",status:"status=no"};c=a.extend(c,d);var b=new Array();a.each(c,function(f,e){if(f!="title"){b.push(e)}});a(document).on("click",a(this).selector,function(g){g.preventDefault();var f=window.open(a(this).attr("href"),c.title,b.join(", "));if(a(this).hasClass("print")){window.setTimeout(function(){f.print()},1000)}})};a.fn.openPopupLoginSearch=function(){a(this).openPopup({height:"height=700",width:"width=645"})};a.fn.makeClickable=function(b){return this.each(function(){if(a(this).find("a").attr("href")){a(this).addClass("clickable");a(this).click(function(c){if(!a(c.target).is("a")){window.location=a(this).find("a:first").attr("href")}})}else{a(this).addClass("notclickable")}})};a.fn.completeHandle=function(){return this.each(function(){var b=a(this).val().match(/([^-]*)(-GANDI)?/)[1];if(b){var b=b+"-GANDI";a(this).val(b)}a(this).val(a(this).val().toUpperCase())})};a.fn.clickExclusiveCheckBox=function(){this.init=function(){var b=this;a(document).on("click",a(this).selector,function(c){a(b).not(c.target).prop("checked",false)});return this};return this.init()};a.fn.clickTableRow=function(c){var b={cancel:"a",event:"click",callback:function(d){},};b=a.extend(b,c);this.init=function(){var d=this;a(document).on(b.event,a(this).selector,function(g){var f=a(g.target);if(!f.is(b.cancel)){b.callback(f.closest(d))}});return this};return this.init()};a.fn.clickCheckBox=function(d){var c={cancel:":input,option,a,label",event:"click",checkboxSelector:"input[type=checkbox]:enabled",activeClass:"active",triggerChange:true};c=a.extend(c,d);var b=this;this.setHighlight=function(f){var e=!!a(f).find(c.checkboxSelector).prop("checked");a(f).toggleClass(c.activeClass,e)};this.setHighlights=function(e){e=e||a(this);e.each(function(f){b.setHighlight(this)})};this.init=function(){b.setHighlights();a(this).on("change",c.checkboxSelector,function(f){b.setHighlight(a(this).parents("tr"))});a(document).on(c.event,a(this).selector,function(i){var f=a(i.target).parents().add(i.target).filter(c.cancel).length;if(i.button==0&&!f){var h=a(this).find(c.checkboxSelector);if(h.length){if(h.is('[type="radio"]')){a(b).toggleClass(c.activeClass,false);h.prop("checked",true).focus();a(this).toggleClass(c.activeClass,true)}else{var g=!h.prop("checked");h.prop("checked",g).focus();a(this).toggleClass(c.activeClass,g)}if(c.triggerChange){h.change()}}}});return this};return this.init()};a.fn.reset=function(b){return this.each(function(){var c=a(this);switch(this.nodeName.toUpperCase()){case"INPUT":this.checked=this.defaultChecked;break;case"TEXTAREA":this.value=this.defaultValue;case"OPTION":c=c.parents("SELECT");case"SELECT":c.find("OPTION").each(function(d){this.selected=this.defaultSelected})}})};a.fn.extendHighlight=function(c){var b=a(this).selector+" tbody tr";return this.each(function(){a(document).on("mouseover",b,function(f){var d=a(this).data(c);a(this).siblings("[data-"+c+'="'+d+'"]').addClass("highlighted")}).on("mouseout",b,function(d){a(this).siblings().removeClass("highlighted")})})};a.fn.clearableTextField=function(d){var c={icon:"clear_cross.png",clear:true,};c=a.extend(c,d);function e(f){f.val().length>0?f.next().show():f.next().hide()}var b=a("<img/>").attr("alt","Ã—").attr("src","/static/images/icons/"+c.icon);a(this).each(function(){a(this).after(b.clone());e(a(this));if(c.clear){var f=a(this);a(this).next().on("click",function(g){f.val("").focus();e(f)})}});return a(this).on("blur",function(f){e(a(this))}).on("keyup",function(f){e(a(this))})};a.fn.fadeToggle=function(b,d,c){return this.each(function(){a(this).animate({opacity:"toggle"},b,d,c)})};a.fn.uncomment=function(b){a(this).contents().each(function(){if(b&&this.hasChildNodes()){a(this).uncomment(b)}else{if(this.nodeType==8){var c=a("<span>"+this.nodeValue+"</span>");a(this).replaceWith(c.contents())}}})};a.fn.ajaxModal=function(c){if(typeof(a().dialog)!="function"){console.error("jQuery UI is missing!");return false}var c=a.extend(true,{preventCallback:function(){return false},htmlContainer:'<div class="modal"></div>',highlightClass:"open-action",closeButtonSelector:"a.button.secondary:not([target])",eventType:"click",dialog:{modal:true,width:600}},(c||{}));var f=c.dialog.open;var b=c.dialog.close;var e=a(c.htmlContainer);function d(l,h){if(c.preventCallback(l,h)){return false}l.preventDefault();var k=h.tagName()=="form";var g=h;if(h.is(":input")&&h.parents("form").length){g=h.parents("form");k=true}var j={};if(k){j=AJAX.hashifyForm(g);var m=h.attr("name");var i=h.val();if(m&&i){j[m]=i}}AJAX.ajaxify(g,{params:j,success:function(n){if(!n){return}if(n.message){return GANDI.Message.info(n.message)}h.closest("tr").addClass(c.highlightClass);if(!h.data("dialog")){h.data("dialog",true);var o=a.extend(c.dialog,{autoOpen:false,open:function(t){if(f){f.apply(this)}var s=a(window).height();var p=a(this).parents().first();var q=parseInt(s*0.8,10);if(a(this).height()>q){a(this).height(q);p.css("top",window.scrollY+parseInt((s-p.height())/2,10))}e.on("click.dialog",c.closeButtonSelector,function(u){u.preventDefault();e.dialog("close")})},close:function(p){if(b){b.apply(this)}h.parents("tbody").find("tr").removeClass(c.highlightClass);e.off("click.dialog");e.empty()}});e.dialog(o)}e.html(n).dialog("open");e.find(c.closeButtonSelector).attr("onclick","")}})}if(a(this).selector){a(document).on(c.eventType,a(this).selector,function(h){var g=a(this);d(h,g)})}else{a(this).on(c.eventType,function(h){var g=a(this);d(h,g)})}a(document.body).attr("data-ajaxmodalready","1");return e};a.fn.go_history_back=function(){a(document).on("click",a(this).selector,function(b){if(window.history.length>1){b.preventDefault();window.history.back()}});return a(this)};a.fn.incrementer=function(c){var b={autoMinMax:false,buttonsClass:"jquery-incrementer",callback:function(){},callbackAdd:false,callbackRemove:false,innerLabel:"",max:1,min:0,step:1};b=a.extend(b,c);return a(this).each(function(f){var p=a(this);p.addClass("incrementer-field");var d=p.nextAll("."+b.buttonsClass);if(d.length>0){if(d.children().is(".incrementer")){var q=d.find(".incrementer.remove");var g=d.find(".incrementer.add")}else{var q=a('<a class="incrementer remove" rel="remove">-</a>').appendTo(d);var g=a('<a class="incrementer add" rel="add">+</a>').appendTo(d)}}else{if(p.next().is(".incrementer")){var q=p.prev(".incrementer.remove");var g=p.next(".incrementer.add")}else{var q=a('<a class="incrementer remove around" rel="remove">-</a>').insertBefore(p);var g=a('<a class="incrementer add around" rel="add">+</a>').insertAfter(p)}}if(b.innerLabel.length){var h=a('<span class="field_wrapper"></span>');var m=p.attr("id");p.wrap(h).after('<label for="'+m+'" class="field_inner">'+b.innerLabel+"</label>")}var e=b.min;var l=b.max;var n=l!=-1;function o(){var i=parseFloat(p.val());if(b.autoMinMax){e=parseFloat(p.attr("min")||p.find("option:enabled").first().val()||b.min);l=parseFloat(p.attr("max")||p.find("option:enabled").last().val()||-1)}if(p.prop("disabled")||p.prop("readonly")){l=e}n=l!=-1;if(n){if(i>=l){a(el).val(l);g.addClass("disabled")}else{g.removeClass("disabled")}}if(i<=e){a(el).val(e);q.addClass("disabled")}else{q.removeClass("disabled")}b.callback.call(p,i)}function k(){if(b.callbackAdd!==false){b.callbackAdd.call(p)}else{if(b.step===false){p.find("option:selected").next().prop("selected",true)}else{var t=parseFloat(p.val())||0;var i=t+b.step;if(t<l||!n){var s=(i<=l||!n)?i:l;p.val(s)}}}o()}function j(){if(b.callbackRemove!==false){b.callbackRemove.call(p)}else{if(b.step===false){p.find("option:selected").prev().prop("selected",true)}else{var t=parseFloat(p.val())||0;var i=t-b.step;if(t>e){var s=(i>=e)?i:e;p.val(s)}}}o()}q.off("click").on("click",function(){p.focus();j()}).mousedown(function(){return false});g.off("click").on("click",function(){p.focus();k()}).mousedown(function(){return false});if(p.is("input")){p.off("keydown").on("keydown",function(i){if(!i.altKey&&!i.metaKey&&!i.shiftKey){switch(i.keyCode){case keyCode.DOWN:i.preventDefault();j();break;case keyCode.PAGE_DOWN:case keyCode.HOME:i.preventDefault();p.val(e);o();break;case keyCode.PAGE_UP:case keyCode.END:if(n){i.preventDefault();p.val(l);o();break}case keyCode.UP:i.preventDefault();k();break}}})}p.off("change").on("change",o);p.change()})};a.fn.ctrlEnter=function(d){d=d||function(g){g.submit()};function c(h){h=h?h:event;var i=h.charCode?h.charCode:(h.keyCode?h.keyCode:(h.which?h.which:0));if(i==13&&h.ctrlKey==true){var g=a(this).closest("form");if(typeof this.checkValidity!=="function"||g.get(0).checkValidity()){d(g)}}}function f(g){e.addClass("tipster right").data("bubule-content",Translations._("ctrl_enter"))}function b(g){e.removeClass("tipster right").removeData("bubule-content")}var e=a(this).closest("form").find('[type="submit"]');if(a(this).is(":focus")){f()}if(a(this).selector){a(document).on("keydown",a(this).selector,c);a(document).on("focus",a(this).selector,f);a(document).on("blur",a(this).selector,b)}else{a(this).on("keydown",c);a(this).on("focus",f);a(this).on("blur",b)}return a(this)};a.fn.previewHandle=function(c){var b={"$target":'<span class="leftspace-1 tipster right show_info handle"><a></a></span>',urlParams:"?balance=0&full=1"};b=a.extend(b,c);return a(this).each(function(){var d=a(b.$target);a(this).on("input",function(){var e=a(this).val();if(e&&this.checkValidity()){d.remove().attr("data-url","/admin/gandi/contact/"+e+"/info"+b.urlParams).attr("data-handle",e).children("a").attr("href","/admin/gandi/corporate/"+e).text(e.replace("-GANDI",""));a(this).after(d)}else{d.trigger("mouseout").remove()}}).trigger("input")})};a.fn.selectText=function(){a(this).focus(function(){$this=a(this);$this.select();window.setTimeout(function(){$this.select()},1);$this.mouseup(function(){$this.off("mouseup");return false})})};a.alt=function(c,d,b){a(document).keydown(function(f){if(!b){b=[]}if(f.keyCode==c.charCodeAt(0)&&f.altKey){d.apply(this,b);return false}})};a.wait=function(b){return a.Deferred(function(c){setTimeout(c.resolve,b)}).promise()};a.fn.selectPage=function(g){var d={url:"",pattern:/\b\d+\b/};d=a.extend(d,g);function e(j){a(this).find("select").show().end().find("span").hide()}function f(j){if(!a("select",this).is(":focus")){c(this)}}function c(j){a(j).find("select").hide().end().find("span").show()}function h(j){if(a(this).val()==a(this).find("[selected]").val()){a(this).hide().parent().data("lock",false).find("span").show()}}function i(j){location.href=location.href.replace(d.pattern,a(this).val());a("body").addClass("progress")}function b(k,n){var j=a("<select />");for(var l=0;l<k.length;l++){var m=new RegExp("/"+k[l]["id"]);selected=window.location.pathname.match(m)?'" selected="selected"':'"';var o=Tools.String.htmlEncode(k[l]["name"]);j.append('<option value="'+k[l]["id"]+selected+">"+o+"</option>")}j.appendTo(n).hide();j.blur(function(){c(a(this).parent())});n.attr("tabindex","0");n.mouseenter(e).click(e).mouseleave(f).focus(e).addClass("js").find("select").blur(h).change(i)}return this.each(function(){AJAX.ajaxify(a(this),{attr:"none",type:"GET",url:d.url,dataType:"json",success:b})})};a.fn.toggleInputs=function(b){return a(this).each(function(){if(b){a(this).show().find("[data-required]").each(function(){a(this).attr("required",true).prop("required",true).removeAttr("data-required").removeData("required").change()});a(this).show().find("[data-pattern]").each(function(){a(this).attr("pattern",a(this).attr("data-pattern")).removeAttr("data-pattern").change()})}else{a(this).hide().find("[required]").each(function(){a(this).data("required",true).attr("data-required",true).removeProp("required").removeAttr("required").change()});a(this).hide().find("[pattern]").each(function(){a(this).attr("data-pattern",a(this).attr("pattern")).attr("pattern",".*").change()})}})};a.fn.skinSelectBoxes=function(c){var b={};b=a.extend(b,c);a(this).each(function(){var e=a(this);var h=a("<div/>").css("width",e.outerWidth()+"px").addClass("tzSelect").html('<div class="selectBox"></div>');var f=a("<ul>").addClass("dropDown");var d=h.find(".selectBox");var g=e.val();e.find("option").each(function(j){var l=a(this);var n=a(this).val();if(n==g){d.html(l.text())}if(l.data("skip")){return true}var k=l.data("html-text")||a(this).html();var m=a("<li>").html(k);if(l.data("icon")){m.html('<img src="'+l.data("icon")+'" /><span>'+l.data("html-text")+"</span>")}m.mouseup(function(){f.trigger("hide");e.val(l.val()).change();return false});f.append(m)});h.append(f.hide());e.hide().after(h);f.on("show",function(){a("ul.dropDown").trigger("hide");if(a(this).is(":animated")){return false}a(this).parent().addClass("expanded");a(this).slideDown(100)}).on("hide",function(){if(a(this).is(":animated")){return false}a(this).parent().removeClass("expanded");a(this).slideUp(100)}).on("toggle",function(){if(a(this).parent().hasClass("expanded")){a(this).trigger("hide")}else{a(this).trigger("show")}});d.mousedown(function(){f.trigger("toggle");return false});e.change(function(){var i=a(this).find("option:selected").text();d.html(i)});a(document).click(function(i){if(!a(i.target).parents(".tzSelect").length){f.trigger("hide")}})})};a.fn.customSerializeArray=function(b){b=a.extend({removeDisableElements:true,removeNestedParams:false,protectNestedParams:{},},b);var c=[],d=a.inArray(a(this).tagName(),["input","select","textarea"])>-1?a(this):a(this).find("input,select,textarea");d.each(function(){var f=(b.removeDisableElements&&a(this).is(":disabled"))||!a(this).attr("name")||a(this).attr("type")=="submit"||a(this).attr("type")=="image"||(a(this).attr("type")=="checkbox"&&!a(this).prop("checked"))||(a(this).attr("type")=="radio"&&!a(this).prop("checked"))||(b.removeNestedParams&&(/\[|\]/.test(a(this).attr("name"))));if(f){return true}var e=a(this).attr("name");if(!_.isEmpty(b.protectNestedParams)&&(new RegExp(b.protectNestedParams.startsWith).test(e))){e=e.replace(b.protectNestedParams.startsWith,"").replace(/\./g,"$$$").replace(/(.*)/,b.protectNestedParams.startsWith+"$1")}c.push({name:e,value:a(this).val()})});return c};a.fn.serializeObject=function(c){c=a.extend({useCustomSerializeArray:false,removeDisableElements:true},c);var b=Object();var d=c.useCustomSerializeArray?a(this).customSerializeArray(c):a(this).serializeArray();a.each(d,function(g,f){var e=a(r('[name="%s"]:not(:disabled)',f.name));f.value=e.data("value")||f.value;if(f.value&&e.data("suffix")){f.value=f.value+e.data("suffix")}if(b[f.name]){if(!a.isArray(b[f.name])){var h=new Array();h.push(b[f.name]);h.push(f.value);b[f.name]=h}else{b[f.name].push(f.value)}}else{b[f.name]=f.value}});return b};a.fn.selectRange=function(c,b){return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(c,b)}else{if(this.createTextRange){var d=this.createTextRange();d.collapse(true);d.moveEnd("character",b);d.moveStart("character",c);d.select()}}})};a.fn.gotoLine=function(c,b){b=!!b;return this.each(function(){var g=a(this).val();var f=new RegExp("^(.*(?:\n|$)){"+(c)+"}");var d=f.exec(g);var h=d[0].length-d[1].length;var e=b?d[0].length:h;a(this).selectRange(h,e)})};a.fn.dragCursor=function(c){var b;if(c===undefined){return a(this).removeClass("grab grabbing")}if(c){a(this).addClass("grabbing").removeClass("grab")}else{a(this).addClass("grab").removeClass("grabbing")}};a.fn.orderByDataAttr=function(c){var b=a(this).get();b.sort(function(e,d){var g=a(e).data(c);var f=a(d).data(c);return(g<f)?-1:(g>f)?1:0});return a(b)};a.fn.toggleIcon=function(b){a(this).addClass("clickable");return this.each(function(){a(this).off("click.clickable").on("click.clickable",function(d){d.preventDefault();var c=a(this).find(b);if(!c.size()){c=a(this)}c.toggleClass("open");a(this).next().fadeToggle(200)})})};a.fn.updateCredits=function(b,c){return a(this).each(function(f){var e=a(this).data("credits");if(b!=e&&!isNaN(parseFloat(b))){a(this).data("credits",b);a(this).children(".credits").text(b);var d=a(this).data("url");if(d){var g=/\/\d+(?:.\d+)?$/;if(d.match(g)){d=d.replace(g,"/"+b)}else{d=d.replace(/\/?$/,"/"+b)}a(this).data("url",d).removeData("bubuleContent")}}})};a.fn.displayCredits=function(c){c=c||1;var b=a(this).text()||a(this).html();return a("<span>").addClass("icon-credit-medium").addClass("tipster").attr("data-url",r("/credit/estimate/%d",Math.round(b/c))).attr("data-credits",b).after("<span>").addClass("credits").html(b)};a.fn.updateDuration=function(f){if(a(this).size()){if(typeof(moment)!="function"){console.error("moment.js is missing!");return false}var g=moment.duration(f*3600000);var b=Translations._("durations");var e=["years","months","days"];if(g.years()==0&&g.months()==0){e.push("hours")}var c=a.grep(e,function(i,h){return g[i]()>0});var d=a.map(c,function(i,h){var k=g[i]();var j=b[i][k==1?"one":"many"];return k+" "+j}).join(", ");a(this).text(d)}return a(this)}})(jQuery);